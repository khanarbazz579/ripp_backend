'use strict';

module.exports = {
	up: async (queryInterface, Sequelize) => {

		await queryInterface.sequelize.query('SET FOREIGN_KEY_CHECKS = 0')
		await queryInterface.sequelize.query('TRUNCATE TABLE sections');
		await queryInterface.sequelize.query('TRUNCATE TABLE call_details');
		await queryInterface.sequelize.query('TRUNCATE TABLE custom_fields');
		await queryInterface.sequelize.query('TRUNCATE TABLE form_default_fields');

		let leadSectionId, clientSectionId, supplierSectionId, leadRecordId;
		let leadFieldId, clientFieldId, supplierFieldId, leadStatusFieldId, companyFieldId;

		let currentDate = new Date();

		await queryInterface.bulkInsert('sections', [
				{
					name: "Record Type",
					description: "",
					type: "LEAD_CLIENT",
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Lead Status",
					description: "",
					type: "LEAD_CLIENT",
					priority_order: 1,
					client_priority_order: 1,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Lead Information",
					description: "",
					type: "LEAD_CLIENT",
					priority_order: 2,
					client_priority_order: 2,
					restrict_action: '4',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Company Information",
					description: "This describes the company detail of lead",
					type: "LEAD_CLIENT_COMPANY",
					priority_order: 3,
					client_priority_order: 3,
					restrict_action: '4',
					allow_add_fields: true,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Contact",
					description: "Contact of Lead",
					type: "LEAD_CLIENT_CONTACT",
					priority_order: 4,
					client_priority_order: 4,
					restrict_action: '4',
					allow_add_fields: true,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Note Information",
					type: "LEAD_CLIENT",
					priority_order: 5,
					client_priority_order: 5,
					restrict_action: '4',
					allow_add_fields: true,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: "Activities",
					description: "Activities of lead will show here",
					type: "LEAD_CLIENT",
					priority_order: 6,
					client_priority_order: 6,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: "Record Files",
					description: "",
					type: "LEAD_CLIENT",
					priority_order: 7,
					client_priority_order: 7,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: "Record Type",
					description: "",
					type: "SUPPLIER",
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					name: "Default Supplier section",
					description: "Default Supplier section form",
					type: "SUPPLIER",
					priority_order: 1,
					client_priority_order: 1,
					restrict_action: '4',
					allow_add_fields: true,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: "Supplier Note Information",
					type: "SUPPLIER",
					priority_order: 1,
					client_priority_order: 0,
					restrict_action: '4',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: "Record Files",
					description: "",
					type: "SUPPLIER",
					priority_order: 2,
					client_priority_order: 0,
					restrict_action: '7',
					allow_add_fields: false,
					is_hidden: false,
					created_at: currentDate,
					updated_at: currentDate
				},
			], {})
			.then((first_section_id) => {
				leadRecordId = first_section_id;
				leadSectionId = leadRecordId + 1;
				supplierSectionId = leadSectionId + 7;
			});

		let field_id;



		await queryInterface.bulkInsert('custom_fields', [
				{
					type: "BOTH",
					table_name: "leads_clients",
					model_name: "owner",
					label: "Record Owner",
					placeholder: null,
					help_text: null,
					control_type: "lead_owner",
					additional_attribute: null,
					section_id: leadRecordId,
					priority_order: 1,
					client_priority_order: 1,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "LEAD",
					table_name: "leads_clients",
					model_name: "sales_stage_id",
					label: "Sales Stage",
					placeholder: null,
					help_text: null,
					control_type: "sales_stage",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "LEAD",
					table_name: "leads_clients",
					model_name: "source",
					label: "Lead Source",
					placeholder: null,
					help_text: null,
					control_type: "dropdown",
					additional_attribute: null,
					section_id: ++leadSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '5',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: "companies",
					model_name: "name",
					label: "Company Name",
					placeholder: "Enter company name here",
					help_text: null,
					control_type: "textfield",
					additional_attribute: null,
					section_id: ++leadSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: "contacts",
					model_name: "first_name",
					label: "First Name",
					placeholder: "Enter firstname here",
					help_text: null,
					control_type: "textfield",
					additional_attribute: null,
					section_id: ++leadSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: "contacts",
					model_name: "last_name",
					label: "Last Name",
					placeholder: "Enter lastname here",
					help_text: null,
					control_type: "textfield",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 2,
					client_priority_order: 2,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: "contacts",
					model_name: "email",
					label: "Email",
					placeholder: "Enter email here",
					help_text: null,
					control_type: "email",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 4,
					client_priority_order: 4,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: "contacts",
					model_name: "phone_number",
					label: "Phone number",
					placeholder: "Enter phone number here",
					help_text: null,
					control_type: "number",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 6,
					client_priority_order: 6,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "BOTH",
					table_name: null,
					model_name: null,
					label: "Actions",
					placeholder: null,
					help_text: null,
					control_type: "action_button",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 1,
					client_priority_order: 1,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "BOTH",
					table_name: null,
					model_name: null,
					label: "Log Activity",
					placeholder: null,
					help_text: null,
					control_type: "action_button",
					additional_attribute: null,
					section_id: leadSectionId,
					priority_order: 3,
					client_priority_order: 3,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "BOTH",
					table_name: "lead_client_details",
					model_name: null,
					label: "Note",
					placeholder: null,
					help_text: null,
					control_type: "note",
					additional_attribute: null,
					section_id: ++leadSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				//Supplier comes from here
				{
					type: "SUPPLIER",
					table_name: "suppliers",
					model_name: "owner",
					label: "Record Owner",
					placeholder: null,
					help_text: null,
					control_type: "lead_owner",
					additional_attribute: null,
					section_id: supplierSectionId,
					priority_order: 1,
					client_priority_order: 1,
					restrict_action: '7',
					field_size: 6,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate,
				},
				{
					type: "SUPPLIER",
					table_name: "contacts",
					model_name: "first_name",
					label: "First name",
					placeholder: "Enter first name here",
					help_text: null,
					control_type: "textfield",
					additional_attribute: null,
					section_id: ++supplierSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "SUPPLIER",
					table_name: "contacts",
					model_name: "last_name",
					label: "Last name",
					placeholder: "Enter last name here",
					help_text: null,
					control_type: "textfield",
					additional_attribute: null,
					section_id: supplierSectionId,
					priority_order: 1,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "SUPPLIER",
					table_name: "contacts",
					model_name: "email",
					label: "Email",
					placeholder: "Enter email here",
					help_text: null,
					control_type: "email",
					additional_attribute: null,
					section_id: supplierSectionId,
					priority_order: 2,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "SUPPLIER",
					table_name: "contacts",
					model_name: "phone_number",
					label: "Phone number",
					placeholder: "Enter phone number here",
					help_text: null,
					control_type: "number",
					additional_attribute: null,
					section_id: supplierSectionId,
					priority_order: 3,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					type: "SUPPLIER",
					table_name: "supplier_details",
					model_name: null,
					label: "Supplier Note",
					placeholder: null,
					help_text: null,
					control_type: "note",
					additional_attribute: null,
					section_id: ++supplierSectionId,
					priority_order: 0,
					client_priority_order: 0,
					restrict_action: '7',
					field_size: 12,
					is_required: false,
					is_hidden: false,
					is_default: true,
					created_at: currentDate,
					updated_at: currentDate
				}
			], {})
			.then((first_field_id) => {
				leadStatusFieldId = first_field_id + 1
				companyFieldId = leadStatusFieldId + 2
				leadFieldId = companyFieldId + 1;
				supplierFieldId = leadStatusFieldId + 12;
			})

	
		
		return await queryInterface.bulkInsert('form_default_fields', [{
					name: 'Sales Stages',
					custom_field_id: leadStatusFieldId,
					is_required: true,
					model_name: 'sales_stage_id',
					item_type: '1',
					priority_order: 4,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Company Name',
					custom_field_id: companyFieldId,
					is_required: false,
					model_name: 'company_name',
					item_type: '1',
					priority_order: 3,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Company Name',
					custom_field_id: companyFieldId,
					is_required: false,
					model_name: 'company_name',
					item_type: '2',
					priority_order: 3,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'First Name',
					custom_field_id: leadFieldId,
					is_required: false,
					model_name: 'first_name',
					item_type: '1',
					priority_order: 0,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'First Name',
					custom_field_id: leadFieldId++,
					is_required: false,
					model_name: 'first_name',
					item_type: '2',
					priority_order: 0,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Last Name',
					custom_field_id: leadFieldId,
					is_required: false,
					model_name: 'last_name',
					item_type: '1',
					priority_order: 1,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Last Name',
					custom_field_id: leadFieldId++,
					is_required: false,
					model_name: 'last_name',
					item_type: '2',
					priority_order: 1,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Email',
					custom_field_id: leadFieldId,
					is_required: false,
					model_name: 'email',
					item_type: '1',
					priority_order: 2,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Email',
					custom_field_id: leadFieldId++,
					is_required: false,
					model_name: 'email',
					item_type: '2',
					priority_order: 2,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Phone Number',
					custom_field_id: leadFieldId,
					is_required: false,
					model_name: 'phone_number',
					item_type: '1',
					priority_order: 5,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Phone Number',
					custom_field_id: leadFieldId,
					is_required: false,
					model_name: 'phone_number',
					item_type: '2',
					priority_order: 5,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'First Name',
					custom_field_id: supplierFieldId++,
					is_required: false,
					model_name: 'first_name',
					item_type: '3',
					priority_order: 0,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Last Name',
					custom_field_id: supplierFieldId++,
					is_required: false,
					model_name: 'last_name',
					item_type: '3',
					priority_order: 1,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Email',
					custom_field_id: supplierFieldId++,
					is_required: false,
					model_name: 'email',
					item_type: '3',
					priority_order: 2,
					created_at: currentDate,
					updated_at: currentDate
				},
				{
					name: 'Phone Number',
					custom_field_id: supplierFieldId,
					is_required: false,
					model_name: 'phone_number',
					item_type: '3',
					priority_order: 4,
					created_at: currentDate,
					updated_at: currentDate
				}
			], {})
			.then((sucuss) => {
				return queryInterface.sequelize.query("SET FOREIGN_KEY_CHECKS = 1")
			});

	},

	down: (queryInterface, Sequelize) => {

	}
};